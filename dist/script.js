const weatherURL="http://api.openweathermap.org/data/2.5/weather?q=LVIV&units=metric&APPID=5d066958a60d315387d9492393935c19";function createForm(){const e=document.createElement("div");e.classList.add("form-container");return e.innerHTML='\n    <form>\n        <div class="input-container">\n            <input type="text" class="weather__input" placeholder="Type the city name"/>\n            <button type="submit" class="weather__button">Confirm</button>\n        </div>\n        <p class="error">This city does not exist.</p>\n    </form>\n    ',e}async function getWeatherData(e){fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=metric&APPID=5d066958a60d315387d9492393935c19`).then((e=>{if(removeError(),e.ok)return e.json();throwError()})).then((e=>{renderWeather(e)})).catch((e=>{console.log(e.message)}))}function renderWeather(e){const t=document.createElement("li");t.classList.add("weather__item");let a="",r="";e.weather.map((e=>{a=e.description,r=e.icon})),t.innerHTML=`\n        <div class="weather__preview">\n            <header class="weather__header">\n                <h3 class="weather__large">${e.name}</h3>\n                <img src="http://openweathermap.org/img/w/${r}.png" class="weather__img"/>\n            </header>\n            <div class="weather__info">\n                <p class="weather__large">${Math.floor(e.main.temp)}째C</p>\n                <p class="weather__small">feels like: ${Math.floor(e.main.feels_like)}째C</p>\n            </div>\n        </div>\n        <div class="weather__details">\n            <div class="weather__info">\n                <h4 class="weather__h4">weather</h4>\n                <p class="weather__small">${a}</p>\n                <p class="weather__small">humidity: ${e.main.humidity}%</p>\n            </div>\n            <div class="weather__info">\n                <h4 class="weather__h4">temperature</h4>\n                <p class="weather__small">min: ${Math.floor(e.main.temp_min)}째C</p>\n                <p class="weather__small">max: ${Math.floor(e.main.temp_max)}째C</p>\n            </div>\n            <div class="weather__info">\n                <h4 class="weather__h4">wind</h4>\n                <p class="weather__small">${e.wind.speed}m</p>\n                <p class="weather__small"></p>\n            </div>\n        </div>`,weatherUl.append(t)}function throwError(){document.querySelector(".error").classList.add("opacity")}function removeError(){document.querySelector(".error").classList.remove("opacity")}const errorContainer=document.querySelector(".error-container"),searchContainer=document.querySelector(".weather__search"),weatherUl=document.querySelector(".weather__items");function removeActiveClass(e){e.classList.remove("active"),e.querySelector(".weather__details").classList.remove("opacity"),document.documentElement.clientWidth>768?(e.style.flexBasis="270px",e.style.height="320px"):e.style.height="200px"}function showDetails(e){if(e.querySelector(".weather__details").classList.add("opacity"),document.documentElement.clientWidth>768){const t=e.querySelector(".weather__preview").offsetWidth+parseInt(window.getComputedStyle(e).gap)+e.querySelector(".weather__details").offsetWidth+25+25;e.style.flexBasis=t+"px"}else{const t=e.offsetHeight,a=e.querySelector(".weather__details").offsetHeight;e.style.height=t+a+"px"}}weatherUl.onclick=e=>{const t=e.target.closest(".weather__item"),a=document.querySelectorAll(".active");if(t.classList.contains("active"))return removeActiveClass(t),void t.querySelector(".weather__details").classList.remove("opacity");a&&[...a].forEach((e=>{removeActiveClass(e)})),t&&(t.classList.add("active"),showDetails(t))},window.onresize=()=>{const e=document.querySelector(".active");e&&removeActiveClass(e),[...document.querySelectorAll(".weather__item")].map((e=>{document.documentElement.clientWidth>768?(e.style.flexBasis="270px",e.style.height="320px"):e.style.height="200px"}))};const form=createForm();searchContainer.append(form),form.onsubmit=e=>{e.preventDefault();getWeatherData(document.querySelector(".weather__input").value)},getWeatherData("Lviv"),getWeatherData("London"),getWeatherData("Kyiv");